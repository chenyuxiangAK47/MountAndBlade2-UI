# QuickStart Mod é—®é¢˜è¯Šæ–­

## ðŸ” å¯èƒ½çš„é—®é¢˜åŽŸå› 

### 1. ç¼–è¯‘é”™è¯¯ï¼ˆå·²ä¿®å¤ âœ…ï¼‰

**é—®é¢˜**: `ComputeStepHashForContent(content)` ä½¿ç”¨äº†ä¸å­˜åœ¨çš„ `content` å˜é‡  
**ä¿®å¤**: æ”¹ä¸º `ComputeStepHashForManager(manager)` å¹¶æ›´æ–°æ–¹æ³•å®žçŽ°

### 2. æŒ‰é’®æ²¡æœ‰æ˜¾ç¤º

**å¯èƒ½åŽŸå› **:
- Harmony è¡¥ä¸æ²¡æœ‰ç”Ÿæ•ˆ
- UIExtenderEx æ²¡æœ‰æ­£ç¡®åŠ è½½
- æŒ‰é’®è¢«å…¶ä»– mod è¦†ç›–

**æ£€æŸ¥æ–¹æ³•**:
1. æŸ¥çœ‹ `logs/rgl_log_*.txt` ä¸­æ˜¯å¦æœ‰ `[QuickStart] EnsureQuickStart` ç›¸å…³æ—¥å¿—
2. æŸ¥çœ‹æ˜¯å¦æœ‰ `[QuickStart] Harmony PatchAll æˆåŠŸ` æ—¥å¿—
3. æ£€æŸ¥ä¸»èœå•æ˜¯å¦æ˜¾ç¤º "QS MOD å¿«é€Ÿå¼€å§‹" æŒ‰é’®

### 3. æŒ‰é’®ç‚¹å‡»äº†ä½†æ²¡æœ‰ååº”

**å¯èƒ½åŽŸå› **:
- æŒ‰é’®çš„ Action æ²¡æœ‰æ‰§è¡Œ
- æ‰¾ä¸åˆ°æ²™ç›’èœå•é¡¹
- æ‰§è¡Œè¿‡ç¨‹ä¸­å‡ºçŽ°å¼‚å¸¸

**æ£€æŸ¥æ–¹æ³•**:
1. æŸ¥çœ‹ `logs/rgl_log_*.txt` ä¸­æ˜¯å¦æœ‰ `[QuickStart] >>> QS BUTTON CLICKED <<<` æ—¥å¿—
2. æŸ¥çœ‹ `Modules/QuickStartMod/qs_runtime.log` æ–‡ä»¶
3. æ£€æŸ¥æ˜¯å¦æœ‰å±å¹•æç¤ºï¼š`[QS MOD] å¿«é€Ÿå¼€å§‹æŒ‰é’®å·²ç‚¹å‡»ï¼`

### 4. è§’è‰²åˆ›å»ºæ²¡æœ‰è‡ªåŠ¨è·³è¿‡

**å¯èƒ½åŽŸå› **:
- `CharacterCreationManager` æ²¡æœ‰æ‰¾åˆ°
- `TrySetCulture` å¤±è´¥
- `TrySelectCurrentMenuOption` å¤±è´¥
- `TrySwitchToNextMenu` å¤±è´¥

**æ£€æŸ¥æ–¹æ³•**:
1. æŸ¥çœ‹ `qs_runtime.log` ä¸­çš„æ—¥å¿—ï¼š
   - `[QuickStart] CharCreation: found CharacterCreationManager`
   - `[QuickStart] CharCreation: set culture to Vlandia`
   - `[QuickStart] CharCreation: selected option`
   - `[QuickStart] CharCreation: switched to next menu`
2. æŸ¥çœ‹ `rgl_log_*.txt` ä¸­çš„ `[QuickStart] ActiveState` æ—¥å¿—ï¼Œç¡®è®¤æ˜¯å¦è¿›å…¥äº† `CharacterCreationState`

### 5. é‡‘å¸æ²¡æœ‰å‘æ”¾

**å¯èƒ½åŽŸå› **:
- æ²¡æœ‰è¿›å…¥ `MapState`
- `Hero.MainHero` ä¸º null
- `ChangeHeroGold` æ–¹æ³•è°ƒç”¨å¤±è´¥

**æ£€æŸ¥æ–¹æ³•**:
1. æŸ¥çœ‹ `rgl_log_*.txt` ä¸­æ˜¯å¦æœ‰ `[QuickStart] Gold granted on MapState: 100000` æ—¥å¿—
2. æŸ¥çœ‹æ˜¯å¦æœ‰ `[QuickStart] Gold grant FAILED` é”™è¯¯æ—¥å¿—
3. æ£€æŸ¥æ¸¸æˆå†…é‡‘å¸æ˜¯å¦å¢žåŠ 

## ðŸ”§ è¯Šæ–­æ­¥éª¤

### æ­¥éª¤ 1: æ£€æŸ¥ç¼–è¯‘

```powershell
cd "D:\SteamLibrary\steamapps\common\Mount & Blade II Bannerlord\Modules\QuickStartMod"
msbuild QuickStartMod.csproj /p:Configuration=Release /p:Platform=x64
```

**é¢„æœŸç»“æžœ**: 0 ä¸ªé”™è¯¯ï¼Œå¯èƒ½æœ‰è­¦å‘Š

### æ­¥éª¤ 2: æ£€æŸ¥ DLL æ˜¯å¦ç”Ÿæˆ

```powershell
Test-Path "bin\Win64_Shipping_Client\QuickStartMod.dll"
```

**é¢„æœŸç»“æžœ**: `True`

### æ­¥éª¤ 3: å¯åŠ¨æ¸¸æˆå¹¶æ£€æŸ¥æ—¥å¿—

1. å¯åŠ¨æ¸¸æˆ
2. æŸ¥çœ‹ä¸»èœå•æ˜¯å¦æ˜¾ç¤º "QS MOD å¿«é€Ÿå¼€å§‹" æŒ‰é’®
3. æŸ¥çœ‹æœ€æ–°çš„ `logs/rgl_log_*.txt` æ–‡ä»¶

**å…³é”®æ—¥å¿—**:
- `[QuickStart] OnSubModuleLoad ENTER` - mod å·²åŠ è½½
- `[QuickStart] Harmony PatchAll æˆåŠŸ` - Harmony è¡¥ä¸å·²åº”ç”¨
- `[QuickStart] EnsureQuickStart: æ³¨å…¥å®Œæˆ` - æŒ‰é’®å·²æ³¨å…¥

### æ­¥éª¤ 4: ç‚¹å‡»æŒ‰é’®å¹¶æ£€æŸ¥

1. ç‚¹å‡» "QS MOD å¿«é€Ÿå¼€å§‹" æŒ‰é’®
2. åº”è¯¥çœ‹åˆ°ç»¿è‰²å±å¹•æç¤ºï¼š`[QS MOD] å¿«é€Ÿå¼€å§‹æŒ‰é’®å·²ç‚¹å‡»ï¼`
3. æŸ¥çœ‹ `qs_runtime.log` æ–‡ä»¶

**å…³é”®æ—¥å¿—**:
- `[QuickStart] >>> QS BUTTON CLICKED <<<` - æŒ‰é’®å·²ç‚¹å‡»
- `[QuickStart] æ‰¾åˆ°åŽŸç‰ˆæ²™ç›’èœå•é¡¹` - æ‰¾åˆ°æ²™ç›’æŒ‰é’®

### æ­¥éª¤ 5: æ£€æŸ¥è§’è‰²åˆ›å»ºè‡ªåŠ¨è·³è¿‡

1. è¿›å…¥è§’è‰²åˆ›å»ºç•Œé¢åŽ
2. æŸ¥çœ‹ `qs_runtime.log` æ–‡ä»¶

**å…³é”®æ—¥å¿—**:
- `[QuickStart] ActiveState = TaleWorlds.CampaignSystem.CharacterCreationContent.CharacterCreationState`
- `[QuickStart] CharCreation: found CharacterCreationManager`
- `[QuickStart] CharCreation: set culture to Vlandia`
- `[QuickStart] CharCreation: selected option`
- `[QuickStart] CharCreation: switched to next menu`

### æ­¥éª¤ 6: æ£€æŸ¥é‡‘å¸å‘æ”¾

1. è¿›å…¥å¤§åœ°å›¾åŽç­‰å¾… 0.5 ç§’
2. æŸ¥çœ‹ `rgl_log_*.txt` æ–‡ä»¶

**å…³é”®æ—¥å¿—**:
- `[QuickStart] Gold granted on MapState: 100000` - é‡‘å¸å·²å‘æ”¾
- æˆ– `[QuickStart] Gold grant FAILED` - é‡‘å¸å‘æ”¾å¤±è´¥

## ðŸ› å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ

### é—®é¢˜ 1: æŒ‰é’®æ²¡æœ‰æ˜¾ç¤º

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ Harmony æ˜¯å¦æ­£ç¡®å®‰è£…ï¼ˆWorkshop ç‰ˆæœ¬ï¼‰
2. æ£€æŸ¥ `SubModule.xml` ä¸­æ˜¯å¦æ­£ç¡®é…ç½®äº†ä¾èµ–
3. æŸ¥çœ‹æ—¥å¿—ä¸­æ˜¯å¦æœ‰ Harmony ç›¸å…³é”™è¯¯

### é—®é¢˜ 2: æŒ‰é’®ç‚¹å‡»åŽæ²¡æœ‰ååº”

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ˜¯å¦æ‰¾åˆ°äº†æ²™ç›’èœå•é¡¹ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
2. æ£€æŸ¥ `InitialMenuOptionVM.ExecuteAction` æ–¹æ³•æ˜¯å¦å­˜åœ¨
3. æŸ¥çœ‹æ˜¯å¦æœ‰å¼‚å¸¸å †æ ˆè·Ÿè¸ª

### é—®é¢˜ 3: è§’è‰²åˆ›å»ºæ²¡æœ‰è‡ªåŠ¨è·³è¿‡

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥ `CharacterCreationManager` æ˜¯å¦æ‰¾åˆ°ï¼ˆæŸ¥çœ‹æ—¥å¿—ï¼‰
2. æ£€æŸ¥ `SetSelectedCulture` æ–¹æ³•è°ƒç”¨æ˜¯å¦æˆåŠŸ
3. æ£€æŸ¥ `GetSuitableNarrativeMenuOptions` æ˜¯å¦è¿”å›žäº†é€‰é¡¹
4. æ£€æŸ¥ `TrySwitchToNextMenu` æ˜¯å¦è¿”å›ž true

### é—®é¢˜ 4: é‡‘å¸æ²¡æœ‰å‘æ”¾

**è§£å†³æ–¹æ¡ˆ**:
1. æ£€æŸ¥æ˜¯å¦è¿›å…¥äº† `MapState`ï¼ˆæŸ¥çœ‹ `ActiveState` æ—¥å¿—ï¼‰
2. æ£€æŸ¥ `Hero.MainHero` æ˜¯å¦ä¸º null
3. æ£€æŸ¥ `ChangeHeroGold` æ–¹æ³•æ˜¯å¦å­˜åœ¨

## ðŸ“‹ æ£€æŸ¥æ¸…å•

åœ¨æŠ¥å‘Šé—®é¢˜å‰ï¼Œè¯·ç¡®è®¤ï¼š

- [ ] mod å·²æ­£ç¡®ç¼–è¯‘ï¼ˆ0 ä¸ªé”™è¯¯ï¼‰
- [ ] `QuickStartMod.dll` å·²ç”Ÿæˆåœ¨ `bin\Win64_Shipping_Client\` ç›®å½•
- [ ] æ¸¸æˆå¯åŠ¨æ—¶æ²¡æœ‰å´©æºƒ
- [ ] æŸ¥çœ‹äº† `logs/rgl_log_*.txt` ä¸­çš„ `[QuickStart]` æ—¥å¿—
- [ ] æŸ¥çœ‹äº† `Modules/QuickStartMod/qs_runtime.log` æ–‡ä»¶
- [ ] ç¡®è®¤æŒ‰é’®æ˜¯å¦æ˜¾ç¤ºåœ¨ä¸»èœå•
- [ ] ç¡®è®¤æŒ‰é’®ç‚¹å‡»åŽæ˜¯å¦æœ‰å±å¹•æç¤º
- [ ] ç¡®è®¤æ˜¯å¦è¿›å…¥äº†è§’è‰²åˆ›å»ºç•Œé¢
- [ ] ç¡®è®¤æ˜¯å¦è¿›å…¥äº†å¤§åœ°å›¾
- [ ] ç¡®è®¤é‡‘å¸æ˜¯å¦å¢žåŠ 

## ðŸ” è°ƒè¯•å»ºè®®

1. **å¯ç”¨è¯¦ç»†æ—¥å¿—**: æ‰€æœ‰å…³é”®æ“ä½œéƒ½ä¼šå†™å…¥ `qs_runtime.log`
2. **æ£€æŸ¥çŠ¶æ€å˜åŒ–**: æŸ¥çœ‹ `ActiveState` æ—¥å¿—ï¼Œäº†è§£æ¸¸æˆçŠ¶æ€æµè½¬
3. **é€æ­¥æµ‹è¯•**: å…ˆæµ‹è¯•æŒ‰é’®æ˜¾ç¤ºï¼Œå†æµ‹è¯•æŒ‰é’®ç‚¹å‡»ï¼Œæœ€åŽæµ‹è¯•è‡ªåŠ¨è·³è¿‡
4. **å¯¹æ¯”åŽŸç‰ˆ**: å…ˆæµ‹è¯•åŽŸç‰ˆ"æ²™ç›’æ¨¡å¼"æ˜¯å¦æ­£å¸¸å·¥ä½œ

## ðŸ“ æŠ¥å‘Šé—®é¢˜æ—¶è¯·æä¾›

1. æœ€æ–°çš„ `logs/rgl_log_*.txt` æ–‡ä»¶ï¼ˆåŒ…å« `[QuickStart]` çš„æ‰€æœ‰æ—¥å¿—ï¼‰
2. `Modules/QuickStartMod/qs_runtime.log` æ–‡ä»¶
3. æ¸¸æˆç‰ˆæœ¬å·
4. å·²å®‰è£…çš„å…¶ä»– mod åˆ—è¡¨
5. å…·ä½“çš„é—®é¢˜æè¿°ï¼ˆæŒ‰é’®æ²¡æ˜¾ç¤º/ç‚¹å‡»æ²¡ååº”/è§’è‰²åˆ›å»ºæ²¡è·³è¿‡/é‡‘å¸æ²¡å‘æ”¾ï¼‰

---

**æœ€åŽæ›´æ–°**: 2025-12-19  
**å·²ä¿®å¤**: `ComputeStepHashForContent` ç¼–è¯‘é”™è¯¯

